{% extends "base.html" %}

{% block title %} | Validate{% endblock %}

{% block back_link %}
<a href="/" class="back-link">
  <i class="bi bi-arrow-left"></i>
  Back to home
</a>
{% endblock %}

{% block header %}
<div class="brand-header">
  <i class="bi bi-shield-check"></i>
  <h1>Validate</h1>
</div>
<p class="brand-subtitle">Check a .env file against a schema</p>
{% endblock %}

{% block content %}
<form id="validate-form" class="form-card">

  <div class="mb-3">
    <label class="form-label fw-medium">.env file</label>
    <input type="file" class="form-control" id="envFile" required />
  </div>

  <div class="mb-3">
    <label class="form-label fw-medium">Schema</label>
    <select class="form-select" id="schemaSelect">
      <option value="generic" selected>Generic</option>
      <option value="flask">Flask</option>
      <option value="fastapi">FastAPI</option>
      <option value="django">Django</option>
      <option value="node">Node.js</option>
      <option value="custom">Custom (upload)</option>
    </select>
  </div>

  <div class="mb-3 d-none" id="customSchemaBlock">
    <label class="form-label fw-medium">Custom schema (.yaml)</label>
    <input
      type="file"
      class="form-control"
      id="schemaFile"
      accept=".yaml,.yml"
    />
    <div class="form-text">
      Upload your own schema. This will override presets.
    </div>
  </div>

  <button type="submit" class="btn btn-primary w-100" id="submitBtn">
    <span><i class="bi bi-check2-circle me-2"></i>Validate</span>
  </button>
</form>

<!-- Result Area -->
<div id="resultPanel" class="result-panel d-none">
  
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="mb-0 fw-semibold">Results</h5>
    
    <div class="view-toggle-group">
      <button type="button" class="view-toggle-btn active" data-view="formatted">
        <i class="bi bi-table"></i>
        Formatted
      </button>
      <button type="button" class="view-toggle-btn" data-view="json">
        <i class="bi bi-code-slash"></i>
        JSON
      </button>
    </div>
  </div>

  <div id="resultFormatted"></div>
  <pre id="resultJson" class="result-json d-none"></pre>
</div>
{% endblock %}
